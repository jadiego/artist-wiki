<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Spotify Template</title>

        <!-- Include libraries -->
        <script src="https://code.jquery.com/jquery.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>

        <!-- Read scripts -->
        <script src="js/app.js"></script>
        <script src="js/angular-spotify.js"></script>
        <script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
        <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
        <link href="css/app.css" type="text/css" rel="stylesheet"/>
        
    </head>

    <body ng-app="myApp" ng-controller="myCtrl">

        <!-- Top Navbar -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topNavbar" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>                        
                    </button>
                    <a class="navbar-brand" href="#">ARTISTWIKI</a>
                </div>
                
                <div class="collapse navbar-collapse" id="topNavbar">  
                    
                    <!--  top left search form-->
                    <form ng-submit="submitSearch(search)" novalidate autocomplete="off" name="searchForm" class="navbar-form navbar-left" role="search">
                        <div class="form-group has-feedback" ng-class="{ 'has-error' : searchForm.searchInput.$invalid && !searchForm.searchInput.$pristine }"> <i class="glyphicon glyphicon-search form-control-feedback"></i>
                            <input type="text" ng-model="search" name="searchInput" class="form-control" placeholder="Name..." required/>
                        </div>
                    </form>
                    
                    <ul class="nav navbar-nav navbar-right">
                        <li><a ng-show="!userId" class="btn" role="button" data-toggle="modal" data-target=".userModal"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                        <li><a ng-show="!userId" class="btn" role="button" data-toggle="modal" data-target=".userModal"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                        <li><a ng-click="logOut()" ng-show="userId" class="btn" role="button" ><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                    </ul>
                    
                </div>
            </div>
        </nav>
        
        
        <!-- Sign in form -->
        <div class="modal fade userModal" tabindex="-1" role="form" aria-labelledby="userModalForm">
            <div class="modal-dialog" role="form">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body">
                        <form novalidate name="userForm">
                            <div class="form-group">
                                <label>Username: </label>
                                <input type="text" class="form-control" name="username" ng-model="username" ng-minlength="6" required/>
                                <p ng-show="userForm.username.$error.minlength" class="help-block">Username is too short.</p>
                            </div>  
                            
                            <div class="form-group">
                                <label>Email: </label>
                                <input type="email" class="form-control" name="email" ng-model="email" required/>
                                <p ng-show="userForm.email.$error.email" class="help-block">Enter a valid email.</p>
                            </div>   
                                
                            <div class="form-group">
                                <label>Password: </label>
                                <input class="form-control" name="password" type="password" ng-model="password" required/>
                            </div>
                            
                            <div class="modal-footer form-group">
                                <button ng-click="signUp()" ng-disabled="userForm.$invalid" type="submit" class="btn btn-primary">Sign Up</button>
                                <button ng-click="signIn()" ng-disabled="userForm.email.$invalid || userForm.password.$invalid" type="submit" class="btn btn-primary">Login</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        

        <!-- Results -->
        <div class="container-fluid" ng-show="artist">
            <div class="row">
                <div class="col-sm-3 col-md-2 sidebar">
                    <ul class="nav nav-sidebar">
                        <li><a href="#overview">OVERVIEW</a></li>
                            <ul class="unstyledList">    
                                <li><a href="#toptracks">TOP TRACKS</a></li>
                                <li><a href="#similarartists">SIMILAR ARTISTS</a></li>
                            </ul>
                        <li><a href="#albums">ALBUMS</a></li>
                            <ul class="unstyledList">    
                                <li ng-repeat="album in artistAlbums"><a href="#{{album.name}}">{{album.name | uppercase}}</a></li>
                            </ul>
                        <li><a href="#reports">REPORTS</a></li>
                            <ul class="unstyledList">    
                                <li><a href="#news">NEWS</a></li>
                                <li><a href="#reviews">REVIEWS</a></li>
                            </ul>
                    </ul>
                </div>
                <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
                    
                    <div id="overview">
                        <div class="overhead">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div id="artistImg" ng-style="{ 'background-image' : 'url(' + artistImg + ')', '-webkit-filter': 'brightness(77%)', 'background-size' : 'cover'}"></div>
                                </div>
                                <div class="col-sm-9" id="header">
                                    <h1><small>ARTIST</small><br>{{artist.name}}</h1>
                                    <span class="genres" ng-repeat="genre in genres">{{genre + " "}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="content">
                            <h2>Overview</h2>
                            <div class="row">
                                <div class="col-sm-6" id="toptracks">
                                    <table class="table">
                                        <thead><h4>Top Tracks</h4></thead>
                                        
                                        <tbody>
                                            <tr ng-repeat="track in topTen" ng-click="play(track.preview_url)" role="button">
                                                <td ng-style="{ 'background-image' : 'url(' + track.album.images[0].url + ')', 'background-size' : 'cover', 'width' : '48px', 'padding' : '2px'}"></td>
                                                <td>{{track.name}}</td>
                                                <td id="smallTableData"><i class="fa fa-play-circle fa-lg"></i></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-sm-6" id="similarartists">
                                    <h4>Similar Artists</h4>
                                    <span ng-repeat="simartist in similarArtists"><a tabindex="0" role="button" data-toggle="popover" data-trigger="hover" data-placement="auto" title="{{simartist.name}}"><img ng-click="submitSearch(simartist.name)" class="similarArtists" ng-src="{{simartist.images[2].url}}"/></a></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="albums">
                        <h2 class="break">Albums</h2>
                        <div class="row">
                            <div class="col-sm-12" ng-repeat="album in artistAlbums">
                                <table id="{{album.name}}" class="table">
                                    <thead>
                                        <div class="media">
                                            <div class="media-left">
                                                <a href="#">
                                                    <img class="media-object albumCovers" ng-src="{{album.images[1].url}}" alt="...">
                                                </a>
                                            </div>
                                            <div class="media-body">
                                                <h4 class="media-heading"><small>{{album.release_date}}</small><br>{{album.name}}</h4>
                                            </div>
                                        </div>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="track in album.tracks.items" ng-click="play(track.preview_url)" role="button">
                                            <td id="smallTableData">{{track.track_number}}</td>
                                            <td>{{track.name}}</td>
                                            <td id="smallTableData"><i class="fa fa-play-circle fa-lg"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div id="reports">
                        <h2 class="break">Reports</h2>
                        <div class="row">
                            <div class="col-sm-6" id="news">
                                <ul>
                                    <h4>News</h4>
                                    <li class="unstyledList news" ng-repeat="article in news"><small>{{article.date_found | date: 'MM-dd-yyyy'}}</small><br><a href="{{article.url}}">{{article.name}}</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-6" id="reviews">
                                <ul>
                                    <h4>Reviews</h4>
                                    <li class="unstyledList news" ng-repeat="review in reviews"><small>{{review.date_reviewed | date: 'MM-dd-yyyy'}}</small><br><a href="{{review.url}}">{{review.name}}</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </body>
</html>